<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电子签名生成器</title>
    <link rel="icon" type="image/png" href="../images/logo.png?v=2">
    <link rel="apple-touch-icon" href="../images/logo.png?v=2">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Caveat&family=Dancing+Script&family=Great+Vibes&family=Marck+Script&family=Sacramento&family=Germanica&family=Ma+Shan+Zheng&family=Zhi+Mang+Xing&family=Long+Cang&family=Noto+Serif+SC:wght@400;700&family=EB+Garamond&family=Alex+Brush&family=Allura&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/signature-generator.css">
</head>

<body class="bg-gray-100 antialiased">

    <header class="bg-white shadow-md">
        <div class="container mx-auto px-6 py-4">
            <a href="../index.html"
                class="inline-flex items-center gap-2 rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-800 shadow-sm ring-1 ring-inset ring-gray-200 transition-all hover:bg-gray-200 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                <i data-lucide="arrow-left" class="h-4 w-4"></i>
                返回主页
            </a>
        </div>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        <div id="signature-card" class="bg-white rounded-xl shadow-2xl p-6 sm:p-8 max-w-2xl mx-auto">
            <div class="text-center mb-6">
                <div
                    class="flex items-center justify-center w-16 h-16 bg-fuchsia-100 text-fuchsia-500 rounded-lg mx-auto mb-4">
                    <i data-lucide="pencil-line" class="w-8 h-8"></i>
                </div>
                <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">电子签名生成器</h1>
                <p class="text-gray-500 mt-2">手写或自动生成您的专属签名</p>
            </div>

            <div class="space-y-6">
                <!-- 模式切换 -->
                <div class="flex justify-center bg-gray-100 p-1 rounded-lg">
                    <button id="mode-manual" class="mode-btn active">
                        <i data-lucide="pen-tool" class="w-4 h-4 mr-2"></i>手写签名
                    </button>
                    <button id="mode-auto" class="mode-btn">
                        <i data-lucide="text-cursor-input" class="w-4 h-4 mr-2"></i>自动生成
                    </button>
                </div>

                <!-- 自动生成设置 (默认隐藏) -->
                <div id="auto-settings" class="hidden space-y-4">
                    <div>
                        <label for="name-input" class="block text-sm font-medium text-gray-700 mb-1">输入姓名</label>
                        <input type="text" id="name-input" placeholder="在此输入文字"
                            class="w-full p-2 border border-gray-300 rounded-md focus:ring-fuchsia-500 focus:border-fuchsia-500">
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="font-family" class="block text-sm font-medium text-gray-700 mb-1">选择字体</label>
                            <select id="font-family"
                                class="w-full p-2 border border-gray-300 rounded-md focus:ring-fuchsia-500 focus:border-fuchsia-500">
                                <optgroup label="中文">
                                    <option value="Ma Shan Zheng">马善政</option>
                                    <option value="Zhi Mang Xing">之芒行</option>
                                    <option value="Long Cang">龙藏</option>
                                    <option value="Noto Serif SC">思源宋体</option>
                                </optgroup>
                                <optgroup label="英文">
                                    <option value="EB Garamond">EB Garamond</option>
                                    <option value="Alex Brush">Alex Brush</option>
                                    <option value="Allura">Allura</option>
                                    <option value="Dancing Script">Dancing Script</option>
                                    <option value="Caveat">Caveat</option>
                                    <option value="Great Vibes">Great Vibes</option>
                                    <option value="Marck Script">Marck Script</option>
                                    <option value="Sacramento">Sacramento</option>
                                </optgroup>
                            </select>
                        </div>
                        <div>
                            <label for="font-weight" class="block text-sm font-medium text-gray-700 mb-1">字体粗细</label>
                            <div class="flex items-center bg-gray-100 rounded-lg p-2 shadow-inner">
                                <input type="range" id="font-weight" min="100" max="900" value="400" step="100"
                                    class="w-full h-4 rounded-lg appearance-none bg-gray-300 range-slider-fuchsia cursor-pointer">
                                <span id="weight-display"
                                    class="ml-3 text-sm font-semibold text-gray-800 w-8 text-center">400</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 签名画布区域 -->
                <div id="signature-container">
                    <canvas id="signature-canvas" class="rounded-lg"></canvas>
                    <p id="signature-tip">在此区域签名...</p>
                </div>

                <!-- 通用控制按钮组 -->
                <div class="space-y-4">
                    <!-- 第一行：设置 (颜色和笔触粗细 - 仅手写模式) -->
                    <div id="manual-settings" class="flex flex-wrap justify-center gap-4">
                        <!-- 颜色选择 -->
                        <div class="flex items-center bg-gray-100 rounded-lg p-2 shadow-inner">
                            <label for="pen-color" class="text-sm font-medium text-gray-700 mr-2">颜色:</label>
                            <input type="color" id="pen-color" value="#000000"
                                class="w-8 h-8 rounded-full border-none focus:ring-2 focus:ring-fuchsia-500 focus:ring-offset-2 cursor-pointer">
                        </div>

                        <!-- 笔触粗细 -->
                        <div class="flex items-center bg-gray-100 rounded-lg p-2 shadow-inner">
                            <label for="pen-width" class="text-sm font-medium text-gray-700 mr-2">粗细:</label>
                            <input type="range" id="pen-width" min="2" max="10" value="4"
                                class="w-24 h-4 rounded-lg appearance-none bg-gray-300 range-slider-fuchsia cursor-pointer">
                            <span id="pen-width-display" class="ml-2 text-sm font-semibold text-gray-800 w-4">4</span>
                        </div>
                    </div>

                    <!-- 第二行：操作 (清空和保存) -->
                    <div class="flex flex-wrap justify-center gap-4 pt-2 border-t border-gray-200">
                        <!-- 清空按钮 -->
                        <button id="clear-button"
                            class="action-btn bg-gray-200 text-gray-700 hover:bg-gray-300 focus:ring-gray-400">
                            <i data-lucide="eraser" class="w-5 h-5 mr-2"></i>
                            清空
                        </button>

                        <!-- 保存按钮 -->
                        <button id="download-btn"
                            class="action-btn download-button text-white bg-fuchsia-600 hover:bg-fuchsia-700 focus:ring-fuchsia-500"
                            disabled>
                            <i data-lucide="download" class="w-5 h-5 mr-2"></i>
                            保存签名
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Image Preview Modal (用于移动端保存) -->
    <div id="image-preview-modal"
        class="hidden fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4 transition-opacity duration-300">
        <div
            class="modal-content bg-white rounded-lg shadow-xl p-6 max-w-xs w-full text-center relative transform transition-all duration-300 scale-95 opacity-0">
            <button id="close-modal-btn"
                class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <h3 class="text-lg font-medium text-gray-900 mb-2">保存签名图片</h3>
            <p class="text-sm text-gray-500 mb-4">请长按下方图片，然后选择“添加到照相册”</p>
            <div id="image-preview-container" class="bg-gray-100 p-2 rounded-md border border-gray-300">
                <!-- Generated image will be placed here -->
            </div>
        </div>
    </div>

    <script src="../js/signature-generator.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>